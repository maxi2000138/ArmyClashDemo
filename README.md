<img width="1536" height="1024" alt="image" src="https://github.com/user-attachments/assets/4904d658-e138-4291-907c-8c9776043fa8" />

# Battle Armies
<u>(На разработку было затрачено 2 дня)</u>

Проект разработан с прицелом на расширяемость и масштабируемость архитектуры. В качестве фреймворка для Dependency Injection используется **Zenject**, а для управления игровыми состояниями реализована **StateMachine**.

## Архитектура состояний

Система состояний разделена на два уровня:

### Project States (Глобальные состояния проекта)

Глобальные состояния инициализируются при запуске приложения и отвечают за подготовку проекта к работе:
- **StateLoadProjectServices** — загружает все необходимые сервисы и статические данные проекта

*В перспективе планируется расширение списка глобальных состояний.*

### Game States (Игровые состояния)

Игровые состояния управляют непосредственно игровым процессом:
- **MenuState** — отображает главное меню и инициализирует подготовку к игре
- **SetupRandomUnitsState** — генерирует и размещает юнитов на сцене перед началом боя
- **GameLoopState** — основной игровой цикл с логикой боевой системы
- **GameEndState** — обработка окончания игры и отображение результатов

## Точки входа

Инициализация проекта происходит через систему EntryPoint-ов:

- **ProjectEntryPoint** — глобальная точка входа для инициализации проекта и всех необходимых сервисов (выполняется при старте приложения)
- **GameEntryPoint** — локальная точка входа для игровой сцены, запускает игровой цикл

## Структура проекта

Проект организован по модульному принципу с разделением на логические слои:

- **`Game/`** — игровая логика и доменные модели
  - `Unit/` — система юнитов с модульными компонентами (Movement, Attack, Health, Characteristics, Stats)
  - `Factory/` — фабрики для создания игровых объектов
  - `Explosion/` — система взрывов и интерактивности
  - `GameModel` — центральная модель игрового состояния

- **`Infrastructure/`** — инфраструктурные системы
  - `States/` — система состояний (StateMachine, состояния проекта и игры)
  - `Installers/` — конфигурация DI через Zenject (Project/Game installers)
  - `StaticData/` — сервис для работы со статическими данными
  - `UI/` — система управления экранами и UI фабрика
  - `Camera/` — сервис управления камерой
  - `EntryPoints/` — точки входа приложения

- **`Utils/`** — вспомогательные утилиты и расширения

## Основные системы и сервисы

### GameModel
Центральная модель игрового состояния, хранящая все юниты и разделяющая их по командам. Предоставляет доступ к спискам юнитов первой и второй команды, а также ко всем юнитам вместе.

### Factory
- **GameFactory** — создание и удаление юнитов на сцене, управление их жизненным циклом
- **UIFactory** — создание UI экранов (Menu, GameEnd) через конфигурацию

### Сервисы
- **ExplosionService** — обработка взрывов и эффекта Color Boom
- **ScreenService** — управление экранами с кешированием и переключением между ними
- **StaticDataService** — загрузка и предоставление доступа к статическим конфигурациям игры
- **CameraService** — управление камерой в игровой сцене

## Компоненты юнитов

Каждый юнит (`GameUnit`) состоит из модульных компонентов:

- **Health** — система здоровья с событиями изменения
- **UnitCharacteristics** — базовые характеристики (HP, Attack, Speed, AttackSpeed) с поддержкой модификаторов
- **AttackData** — данные атаки с системой кулдаунов
- **UnitMovementData** — данные движения с плавным направлением и скоростью
- **UnitStats** — текущие характеристики с визуальным отображением

### Системы работы с юнитами

- **UnitMover** — движение юнитов к цели с учётом разделения (separation) и сглаживания направления
- **UnitAttacker** — логика атаки с проверкой дистанции, кулдауна и нанесением урона
- **UnitTargetFinder** — поиск ближайших вражеских целей для юнита
- **UnitCharacteristicsApplier** — применение модификаторов характеристик (например, при Color Boom)

# Конфигурации (Configs)

Конфигурации проекта реализованы через **ScriptableObject** и хранятся в `Resources/Configs/`. Загрузка конфигов выполняется через **StaticDataService** при инициализации проекта.

### Игровые конфиги

- **UnitCharacteristicsConfig** — базовые характеристики юнитов (HP, Attack, Speed, AttackSpeed) и модификаторы для форм, размеров и цветов
- **UnitViewConfig** — префабы юнитов по формам, масштабы по размерам и материалы по цветам
- **MovementConfig** — настройки движения юнитов (радиус обнаружения, сила избегания, плавность поворота)
- **AttackConfig** — настройки атаки (радиус атаки)
- **SpawnConfig** — параметры спавна юнитов (количество юнитов на команду)
- **ExplosionConfig** — настройки взрывов Color Boom (радиус и сила отталкивания)

### UI конфиги

- **ScreensConfig** — конфигурация экранов игры (Menu, GameEnd) с привязкой к типам экранов
- **UiPrefabsConfig** — префабы UI элементов (например, UnitViewStats для отображения характеристик)

## Color Boom — интерактивная механика

В проекте реализована уникальная механика **"Color Boom"**: при клике курсором по игровой области происходит взрыв, который окрашивает ближайших юнитов в случайный цвет и изменяет их характеристики в соответствии с выбранным цветом. Эта механика добавляет интерактивности и разнообразия в процесс наблюдения за автоматическим боем между командами юнитов.
